{% extends "base.html" %}

{% block title %}Dashboard - Santos e Domingues Advocacia{% endblock %}

{% block content %}
{% if get_flashed_messages(with_categories=true) %}
<div class="flash-container">
    {% for category, message in get_flashed_messages(with_categories=true) %}
        <div class="flash {{ category }}">
            {{ message }}
            <span class="flash-close" onclick="this.parentElement.style.display='none';">&times;</span>
        </div>
    {% endfor %}
</div>
{% endif %}


<div class="dashboard-container">
    <h1>Bem-vindo, Dr(a). {{ session['user'] }}!</h1>
    <p>Este é o seu painel de controle.</p>

    <div class="cards">
        <div class="card">
            <h3>Clientes</h3>
            <p>Visualize e gerencie seus clientes</p>
            <a href="#">Ver clientes</a>
        </div>
        <div class="card">
            <h3>Processos</h3>
            <p>Gerencie processos ativos</p>
            <a href="#">Ver processos</a>
        </div>
        <div class="card">
            <h3>Mensagens</h3>
            <p>Leia e responda mensagens de clientes</p>
            <a href="#">Abrir mensagens</a>
        </div>
    </div>

    <form action="{{ url_for('logout') }}" method="POST" style="margin-top:20px;">
        <button type="submit">Sair</button>
    </form>
</div>

<hr>

<div class="container">
    <h1>Análise de Exame</h1>

    <!-- Formulário de upload -->
    <form method="post" action="{{ url_for('exame_result') }}" enctype="multipart/form-data" class="upload-form">
        <input type="file" name="file" accept="application/pdf" required>
        <button type="submit">Enviar</button>
    </form>

    <!-- Mensagens flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flashes">
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <!-- Resultado da análise -->
    {% if result %}
    <div class="result-card">
        <h2>Resultado da análise:</h2>
        <code class="result">{{ result }}</code>
    </div>
    {% endif %}
</div>


{% endblock %}
